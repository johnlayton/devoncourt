<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../core-ajax/core-ajax.html">
<!--<link rel="import" href="../core-component-page/core-component-page.html">-->
<link rel="import" href="../leaflet-map/leaflet-import.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-slider/paper-slider.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-shadow/paper-shadow.html">
<link rel="import" href="../paper-interval-slider/paper-interval-slider.html">

<!--

##### Example

<lleaflet-opendap-layer> </leaflet-opendap-layer>

##### Example

<leaflet-opendap-layer url="..." variable="...">
</leaflet-opendap-layer>

@element leaflet-opendap-layer
-->
<polymer-element name="leaflet-opendap-layer" attributes="url variable position height width legend date">
  <template>
    <style>
      /*
      :host {
        display: none;
      }
      */

/*
      .time-slider {
        position: absolute;
        bottom: 10px;
        right: 10%;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 10px;
        border-style: solid;
        border-color: #7b98bc;
        padding: 2px;
        font-size: 20px;
        height: 30px;
        width: 80%;
        line-height: 26px;
      }

      .threshold-slider {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 10px;
        border-style: solid;
        border-color: #7b98bc;
        padding: 2px;
        font-size: 20px;
        height: 80%;
        width: 30px;
        line-height: 26px;
        -webkit-appearance: slider-vertical;
        */
/*writing-mode: bt-lr;*//*

      }
*/


      /*body {*/
        /*font-family: RobotoDraft, 'Helvetica Neue', Helvetica, Arial;*/
        /*margin: 0;*/
        /*padding: 24px;*/
      /*}*/
/*
      #label {
        position: absolute;
        z-index: 999;
        bottom: 40px;
        right: 10%;
        height: 25px;
        width: 400px;
        background: rgba(255, 255, 255, 0.4);
        *//*border-radius: 10px;*//*
        *//*border-style: solid;*//*
        *//*border-color: #7b98bc;*//*
        padding: 2px;
        font-size: 20px;
      }

      #time_slider {
        position: absolute;
        z-index: 999;
        bottom: 20px;
        right: 10%;
        height: 25px;
        *//*width: 80%;*//*
        *//*width: 25px;*//*
        *//*height: 80%;*//*
        background: rgba(255, 255, 255, 0.4);
        *//*border-radius: 10px;*//*
        *//*border-style: solid;*//*
        *//*border-color: #7b98bc;*//*
        padding: 2px;
        font-size: 20px;
      }

      #time_label {
        position: absolute;
        z-index: 999;
        bottom: 50px;
        right: 10%;
        height: 25px;
        *//*width: 80%;*//*
        *//*width: 25px;*//*
        *//*height: 80%;*//*
        background: rgba(255, 255, 255, 0.4);
        *//*border-radius: 10px;*//*
        *//*border-style: solid;*//*
        *//*border-color: #7b98bc;*//*
        padding: 2px;
        font-size: 20px;
      }*/

      #time {
        position: absolute;
        z-index: 999;
        bottom: 50px;
        height: 25px;
      }
    </style>

    <script id="fragment" type="x-shader/x-fragment">
      precision mediump float;

      varying vec4 vColor;

      void main(void) {
          gl_FragColor = vColor;
      }

    </script>

    <script id="vertex" type="x-shader/x-vertex">
      attribute vec3 aVertexPosition;
      attribute vec4 aVertexColor;

      uniform mat4 uMVMatrix;
      uniform mat4 uPMatrix;

      varying vec4 vColor;

      void main(void) {
          gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
          vColor = aVertexColor;
      }

    </script>

    <script id="points" type="x-shader/x-vertex">
      attribute vec3 aVertexPosition;
      attribute vec4 aVertexColor;

      uniform mat4 mapMatrix;

      varying vec4 vColor;

      void main(void) {
          gl_Position = mapMatrix * vec4(aVertexPosition, 1.0);
          vColor = aVertexColor;
          gl_PointSize = 6.0;
      }

    </script>

    <core-xhr id="xhr"></core-xhr>

    <input id="threshold" class="threshold-slider" type="range" step="1" width="50" height="150" multiple value="0,25" />

    <paper-shadow id="time" z="3" class="span-shadow" vertical>
      <paper-button id="time_label" raised>{{ date | toMoment }}</paper-button>
      <paper-slider id="time_slider" immediateValue="{{ date }}"></paper-slider>
    </paper-shadow>

    <canvas id="canvas" />
  </template>

  <script>

  </script>

  <script src="../lodash/dist/lodash.js"></script>
  <script src="../d3/d3.js"></script>
  <script src="../moment/moment.js"></script>

  <script src="../kettstreet/kettstreet.js"></script>

  <script src="./webgl-themes.js"></script>
  <script src="./webgl-overlay.js"></script>
  <script src="leaflet-opendap-layer.js"></script>

</polymer-element>

<polymer-element name="leaflet-opendap-colors" attributes="">
  <template>
    <style>
      /*
      :host {
        display: none;
      }
      */
    </style>
  </template>

  <script>
    "user strict"

    Polymer( 'leaflet-opendap-colors', {

      created : function () {
      }

    } );
  </script>
</polymer-element>
